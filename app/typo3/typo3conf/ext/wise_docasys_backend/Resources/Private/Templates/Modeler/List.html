<f:layout name="Modeler" /> 
<f:section name="content">
    <script src="{f:uri.resource(path: 'BpmnJs/jquery-3.3.1.min.js')}"></script>
    <h1>Alle Modelle</h1>
    <f:for each="{modelTypes}" as="modelType">
        <h2>{modelType.name}-Modelle</h2>
        <div class="table-fit">
            <table class="table table-striped table-hover">
                <tr>
                    <th style="width: 80%">{modelType.name}-Modell</th>
                    <th style="width: 20%; text-align: right;">
                        <f:be.buttons.icon uri="{f:uri.action(action:'add', arguments: '{type: \'{modelType.name}\'}')}" icon="actions-add" title="Neues {modelType.name}-Modell erstellen" additionalAttributes="{class: 'btn btn-default'}" />
                    </th>
                </tr>
                <f:for each="{modelType.files}" as="file">
                    <tr>
                        <td>
                            {file.filename}
                        </td>
                        <td class="col-control" nowrap="nowrap">
                            <f:be.buttons.icon uri="{f:uri.action(action:'edit', arguments: '{f: \'{file.hash}\'}')}" icon="actions-open" title="Modellieren" additionalAttributes="{class: 'btn btn-default'}" />
                            <f:be.buttons.icon uri="{f:uri.action(action:'remove', arguments: '{f: \'{file.hash}\'}')}" icon="actions-delete" title="Löschen" additionalAttributes="{class: 'btn btn-default remove-button'}" />
                        </td>
                    </tr>
                </f:for>
            </table>
        </div>
    </f:for>
    
    <script>
        $('a.remove-button').click(function(e) {
            if(!confirm('Das Modell wirklich gelöscht werden?')) {
                e.stopPropagation();
                e.preventDefault();    
            } 
        });  
    </script>
</f:section>